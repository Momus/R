group_by(`State.Name`) %>%
summarise(mean = mean(`Arithmetic.Mean`)) %>%
arrange(desc(mean)))
head(daily_SPEC_2014 %>%
filter(`Parameter.Name` == "EC PM2.5 LC TOR", grepl('Calif|Ariz', `State.Name` )) %>%
group_by(`State.Name`) %>%
summarise(mean = mean(`Arithmetic.Mean`)) %>%
arrange(desc(mean)))
head(daily_SPEC_2014 %>%
filter(`Parameter.Name` == "OC PM2.5 LC TOR", `Longitude` < -100) %>%
select(`Arithmetic.Mean`))
median((daily_SPEC_2014 %>%
filter(`Parameter.Name` == "OC PM2.5 LC TOR", `Longitude` < -100) %>%
select(`Arithmetic.Mean`))$Arithmetic.Mean)
library(readxl)
aqs_sites <- readxl::read_excel("./data/aqs_sites.xlsx")
warnings()
ls()
head(aqs_sites)
str(aqs_sites)
str(aqs_sites)
clear()
cls()
str(aqs_sites)
head(aqs_sites %>%
filt
er(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN"))
 head(aqs_sites %>%
filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN"))
 dim(aqs_sites %>%
filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN"))
 burbs_aqs_sites <- aqs_sites %>%
filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN")
dim(burbs_aqs_sites)
ls()
?ls
?ls[2]
ls()[2]
ls()[1]
format(object.size(ls()), units = "auto")
object.size(ls())
ls()
object.size(ls()[1:3])
ls()[1:3]
ls()[1]
ls
format
ls()
str(daily_SPEC_2014)
str(aqs_sites)
head(names(aqs_sites))
head(names(daily_SPEC_2014))
names(aqs_sites)[1]
names(daily_SPEC_2014)[1]
ls()
big_one <- full_join(aqs_sites, daily_SPEC_2014)
object.size(big_one)
head(big_one %>%
    filter(`Land Use` == "RESIDENTIAL", , `Location Setting` == "SUBURBAN"))
head(big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN"))
head(big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == EC PM2.5 LC TOR)
)
head(big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR"))
head(big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR", `Longitude` >= -100))
dim(big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR", `Longitude` >= -100))
dim(big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR"))
dim(big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR", `Longitude` => -100))
dim(big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR", `Longitude` >= -100))
median((big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR", `Longitude` >= -100)
select(`Arithmetic.Mean`))$`Arithmetic.Mean`)
median((big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR", `Longitude` >= -100)
select(`Arithmetic.Mean`))$`Arithmetic.Mean`)
head(big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR", `Longitude` >= -100)
select(`Arithmetic.Mean`))
head(big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR", `Longitude` >= -100) %>%
select(`Arithmetic.Mean`))
median((big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR", `Longitude` >= -100) %>%
select(`Arithmetic.Mean`))$`Arithmetic.Mean`)
big_one <- full_join(aqs_sites, daily_SPEC_2014)
options(STERM='iESS', str.dendrogram.last="'", editor='emacsclient', show.error.locations=TRUE)
ls()
dim(big_one)
format(dim(big_one), units=auto)
format(dim(big_one)[1], units=auto)
class(format(dim(big_one)[1], units=auto))
median((big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR", `Longitude` >= -100) %>%
select(`Arithmetic.Mean`))$`Arithmetic.Mean`)
library(tidyverse)
median((big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR", `Longitude` >= -100) %>%
select(`Arithmetic.Mean`))$`Arithmetic.Mean`)
head(big_one %>%
    filter(`Land Use` == "RESIDENTIAL", `Location Setting` == "SUBURBAN", `Parameter.Name` == "EC PM2.5 LC TOR", `Longitude` >= -100) %>%
select(`Arithmetic.Mean`))
names(big_one)
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
group_by(month=floor_date(`Date.Local`, "month")
summarise(month, mean( `Arithmetic.Mean`))))
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
group_by(month=floor_date(`Date.Local`, "month") %>%
summarise(month, mean( `Arithmetic.Mean`))))
library(lubridate)
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
group_by(month=floor_date(`Date.Local`, "month") %>%
summarise(month, mean( `Arithmetic.Mean`))))
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
group_by(month=floor_date(`Date.Local`, "month")))
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
group_by(month=floor_date(`Date.Local`, "month")))
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(`Date.Local`))
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(`Date.Local`),17)
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(`Date.Local`, `Arithmetic.Mean`),17)
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(`Date.Local`, `Arithmetic.Mean`) %>%
group_by(month = floor_date(`Date.Local`, "month")
,17)
)
?floor_date
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(`Date.Local`, `Arithmetic.Mean`)

,17)
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs =`Arithmetic.Mean`)
,17)
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`) %>%
group_by(month = floor_date(date, "month")
)

,17)
))
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`) %>%
group_by(month = floor_date(date, "month")),17)
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`))
str(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`))
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`))
(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`)$date[1]
)
(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`))$date[1]
class((big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`))$date[1])
?ymd_hms
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`) %>%
group_by(month = floor_date(ymd_hms(date), "month")),17)
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`))
commercial_sulfate <- (big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`))
str(commercial_sulfate)
head(commercial_sulfate)
head(ymd_hms(commercial_sulfate$date))
head(as.POSIXct.Date(commercial_sulfate$date))
head(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`) %>%
group_by(month = floor_date(as.POSIXct.Date(date), "month")),17)
str(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`) %>%
group_by(month = floor_date(as.POSIXct.Date(date), "month")),17)
head(commercial_sulfate  %>%
group_by(month = floor_date(as.POSIXct.Date(date), "month")),17)
str(commercial_sulfate  %>%
group_by(month = floor_date(as.POSIXct.Date(date), "month")),17)
str(commercial_sulfate  %>%
group_by(month = floor_date(as.POSIXct.Date(date), "month")) %>%
summarise(mean = mean(obs))
,17)
head(commercial_sulfate  %>%
group_by(month = floor_date(as.POSIXct.Date(date), "month")) %>%
summarise(mean = mean(obs))
,17)
commercial_sulfate  %>%
group_by(month = floor_date(as.POSIXct.Date(date), "month")) %>%
summarise(mean = mean(obs))
commercial_sulfate  %>%
group_by(month = floor_date(as.POSIXct.Date(date), "month")) %>%
summarise(mean = mean(obs)) %>%
arrange(desc(mean))
ls()
names(aqs_sites)
dim(big_one %>%
    filter(`Land Use` == "COMMERCIAL",
`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`))
head(big_one %>%
    filter(`State Code` == 6, `County Code` == 65, `Site Number` == 8001,
lgrep('Sulfate PM2.5 LC|Total Nitrate PM2.5 LC', `Parameter.Name` )) %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`))
head(big_one %>%
    filter(`State Code` == 6, `County Code` == 65, `Site Number` == 8001,
grepl('Sulfate PM2.5 LC|Total Nitrate PM2.5 LC', `Parameter.Name` )) %>%
select(date = `Date.Local`, obs = `Arithmetic.Mean`))
head(big_one %>%
    filter(`State Code` == 6, `County Code` == 65, `Site Number` == 8001,
grepl('Sulfate PM2.5 LC|Total Nitrate PM2.5 LC', `Parameter.Name` )) %>%
select(date = `Date.Local`, parameter = `Parameter.Name`, obs = `Arithmetic.Mean`))
dim(big_one %>%
    filter(`State Code` == 6, `County Code` == 65, `Site Number` == 8001,
grepl('Sulfate PM2.5 LC|Total Nitrate PM2.5 LC', `Parameter.Name` )) %>%
select(date = `Date.Local`, parameter = `Parameter.Name`, obs = `Arithmetic.Mean`))
local_Sulfate_Nitrate <- (big_one %>%
    filter(`State Code` == 6, `County Code` == 65, `Site Number` == 8001,
grepl('Sulfate PM2.5 LC|Total Nitrate PM2.5 LC', `Parameter.Name` )) %>%
select(date = `Date.Local`, parameter = `Parameter.Name`, obs = `Arithmetic.Mean`))
dim(local_Sulfate_Nitrate)
factor(local_Sulfate_Nitrate)
cut(local_Sulfate_Nitrate)
head(local_Sulfate_Nitrate, 17)
head(local_Sulfate_Nitrate %>% filter(grepl("ulf", parameter)), 17)
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date)
, 17)
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date) %>%
summary(date, parameter, mean(obs))
, 17)
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date) %>%
summary(date, mean(obs))
, 17)
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date) %>%
summary(parameter, mean(obs))
, 17)
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date) %>%
summary(parameter, mean(obs))
, 17)
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date) %>%
summary(mean(obs))
, 17)
head(local_Sulfate_Nitrate )
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date) %>%
summary(mean(`obs`))
, 17)
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date) %>%
summarise(mean(`obs`))
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date) %>%
summarise(mean(`obs`)))
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date) %>%
summarise(mean(`obs`))
, 17)
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date) %>%
summarise(parameter, mean(`obs`))
, 17)
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date) %>%
summarise(mean(`obs`))
, 17)
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date, parameter) %>%
summarise(mean(`obs`))
, 17)
dim(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date, parameter) %>%
summarise(mean(`obs`))
, 17)
dim(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date, parameter) %>%
summarise(mean(`obs`)))
str(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date, parameter) %>%
summarise(mean(`obs`)))
head(local_Sulfate_Nitrate %>% 
filter(grepl("ulf", parameter)) %>%
group_by(date, parameter) %>%
summarise(mean(`obs`)))
head(local_Sulfate_Nitrate %>% 
group_by(date, parameter) %>%
summarise(mean(`obs`)))
local_Sulfate_Nitrate %>% 
group_by(date, parameter) %>%
summarise(mean(`obs`))
local_Sulfate_Nitrate
arrange(desc(mean)))
head(local_Sulfate_Nitrate %>% 
group_by(date, parameter) %>%
summarise(mean(`obs`)))
head(local_Sulfate_Nitrate %>% 
group_by(date, parameter) %>%
summarise(mean(`obs`)))
head(local_Sulfate_Nitrate %>% 
group_by(date, parameter) %>%
summarise(mean(`obs`)))
local_Sulfate_Nitrate
local_Sulfate_Nitrate %>% gather(date, parameter)
stocks <- data_frame(
  time = as.Date('2009-01-01') + 0:9,
  X = rnorm(10, 0, 1),
  Y = rnorm(10, 0, 2),
  Z = rnorm(10, 0, 4)
)
stocks
gather(stocks, stock, price, -time)
stocks
local_Sulfate_Nitrate %>% gather(date)
local_Sulfate_Nitrate
local_Sulfate_Nitrate %>% gather(parameter)
local_Sulfate_Nitrate %>% spread(parameter)
local_Sulfate_Nitrate %>% spread(parameter,date)
local_Sulfate_Nitrate
local_Sulfate_Nitrate %>% 
group_by(date, parameter) %>%
summarise(mean(`obs`))
summarry_local_Sulfate_Nitrate <- local_Sulfate_Nitrate %>% 
group_by(date, parameter) %>%
summarise(mean(`obs`))
 summarry_local_Sulfate_Nitrate
 summarry_local_Sulfate_Nitrate %>% filter(grepl('ulfate'  parameter)
 summarry_local_Sulfate_Nitrate %>% filter(grepl('ulfate'  parameter))
 summarry_local_Sulfate_Nitrate %>% filter(grepl('ulfate' ,parameter))
(summarry_local_Sulfate_Nitrate %>% filter(grepl('ulfate' ,parameter))) - (summarry_local_Sulfate_Nitrate %>% filter(grepl('itra' ,parameter)))
dim( summarry_local_Sulfate_Nitrate %>% filter(grepl('ulfate' ,parameter)))
dim((summarry_local_Sulfate_Nitrate %>% filter(grepl('itra' ,parameter))))
(summarry_local_Sulfate_Nitrate %>% filter(grepl('ulfate' ,parameter))) + (summarry_local_Sulfate_Nitrate %>% filter(grepl('itra' ,parameter)))
((summarry_local_Sulfate_Nitrate %>% filter(grepl('ulfate' ,parameter))) + (summarry_local_Sulfate_Nitrate %>% filter(grepl('itra' ,parameter)))) %>% filter(`mean(obs)` < 10)
((summarry_local_Sulfate_Nitrate %>% filter(grepl('ulfate' ,parameter))) + (summarry_local_Sulfate_Nitrate %>% filter(grepl('itra' ,parameter)))) %>% filter(`mean(obs)` > 10)
?cor
head(big_one %>%
filter(grepl('Sulfate PM2.5 LC|Total Nitrate PM2.5 LC', `Parameter.Name`)))
head(big_one %>%
filter(grepl('Sulfate PM2.5 LC|Total Nitrate PM2.5 LC', `Parameter.Name`))
select(`State.Code`, `County.Code`, `Site.Num`, date=`Date.Local`, obs=`Arithmetic.Mean`))
head(big_one %>%
filter(grepl('Sulfate PM2.5 LC|Total Nitrate PM2.5 LC', `Parameter.Name`)))
head(big_one %>%
filter(grepl('Sulfate PM2.5 LC|Total Nitrate PM2.5 LC', `Parameter.Name`)) %>%
select(`State.Code`, `County.Code`, `Site.Num`, date=`Date.Local`, obs=`Arithmetic.Mean`))
head(big_one %>%
filter(grepl('Sulfate PM2.5 LC|Total Nitrate PM2.5 LC', `Parameter.Name`)) %>%
select(State=`State.Code`, County=`County.Code`, Site=`Site.Num`, observation =`Parameter.Name`,date=`Date.Local`, obs=`Arithmetic.Mean`))
all_sites_Sulfate_Nitrate <- (big_one %>%
filter(grepl('Sulfate PM2.5 LC|Total Nitrate PM2.5 LC', `Parameter.Name`)) %>%
select(State=`State.Code`, County=`County.Code`, Site=`Site.Num`, observation =`Parameter.Name`,date=`Date.Local`, obs=`Arithmetic.Mean`))
str(all_sites_Sulfate_Nitrate)
all_sites_Sulfate_Nitrate <- (big_one %>%
filter(grepl('Sulfate PM2.5 LC|Total Nitrate PM2.5 LC', `Parameter.Name`)) %>%
select(State=`State.Code`, County=`County.Code`, Site=`Site.Num`, observation =`Parameter.Name`,date=`Date.Local`, obs=`Arithmetic.Mean`))
str(all_sites_Sulfate_Nitrate)
all_sites_Sulfate_Nitrate <- (big_one %>%,
filter(grepl(Parameter.Name == "Sulfate PM2.5 LC" )) %>%
select(State=`State.Code`, County=`County.Code`, Site=`Site.Num`, observation =`Parameter.Name`,date=`Date.Local`, obs=`Arithmetic.Mean`))
all_sites_Sulfate_Nitrate <- (big_one %>%,
filter(Parameter.Name == "Sulfate PM2.5 LC" ) %>%
select(State=`State.Code`, County=`County.Code`, Site=`Site.Num`, observation =`Parameter.Name`,date=`Date.Local`, obs=`Arithmetic.Mean`))
all_sites_Sulfate_Nitrate <- (big_one %>%
filter(`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(State=`State.Code`, County=`County.Code`, Site=`Site.Num`, observation =`Parameter.Name`,date=`Date.Local`, obs=`Arithmetic.Mean`))
daily_SPEC_2014 <- read.csv("./data/daily_SPEC_2014.csv.bz2")
ls()
dim(b
)
dim(big_one)
object.size(big_one)
head(daily_SPEC_2014 %>%
filter(`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(State=`State.Code`, County=`County.Code`, Site=`Site.Num`, obs=`Parameter.Name`, date=`Date.Local`))
library(tidyverse)
head(daily_SPEC_2014 %>%
filter(`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(State=`State.Code`, County=`County.Code`, Site=`Site.Num`, obs=`Parameter.Name`, date=`Date.Local`))
str(daily_SPEC_2014 %>%
filter(`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(State=`State.Code`, County=`County.Code`, Site=`Site.Num`, obs=`Parameter.Name`, date=`Date.Local`))
dim(daily_SPEC_2014 %>%
filter(`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(State=`State.Code`, County=`County.Code`, Site=`Site.Num`, obs=`Parameter.Name`, date=`Date.Local`))
all_Sulfate <- (daily_SPEC_2014 %>%
filter(`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(State=`State.Code`, County=`County.Code`, Site=`Site.Num`, obs=`Parameter.Name`, date=`Date.Local`))
total_total__Nitrate <- (daily_SPEC_2014 %>%
               filter(`Parameter.Name` == "Total Nitrate PM2.5 LC") %>%
               select(State=`State.Code`
                    , County=`County.Code`
                    , Site=`Site.Num`
                    , obs=`Parameter.Name`
                    , date=`Date.Local`))
dim(all_Sulfate) == dim(total_total__Nitrate)
dim(all_Sulfate)
dim(total_total__Nitrate)
head(all_Sulfate %>%
group_by(date,obs) %>%
summarise(mean(`obs`)))
head(all_Sulfate %>%
group_by(State, County, Site, date,obs) %>%
summarise(mean(`obs`)))
head(all_Sulfate %>%
group_by(State, County, Site, date,obs) %>%
summarise(mean(`obs`, na,rm=TRUE)))
head(all_Sulfate %>%
group_by(State, County, Site, date,obs) %>%
summarise(mean(`obs`, na.rm = TRUE)))
warnings()
head(all_Sulfate %>%
group_by(State, County, Site, date,obs))
all_Sulfate <- (daily_SPEC_2014 %>%
filter(`Parameter.Name` == "Sulfate PM2.5 LC") %>%
select(State=`State.Code`, County=`County.Code`, Site=`Site.Num`, obs=`Parameter.Name`, value=`Arithmetic.Mean`,date=`Date.Local`))
head(all_Sulfate %>%
group_by(State, County, Site, date) %>%
summarise(mean(`value`, na.rm = TRUE)))
head(all_Sulfate %>%
group_by(State, County, Site, date) %>%
summarise(mean(`value`)))
head(all_Sulfate)
head(all_Sulfate %>%
group_by(State, County, Site, date) %>%
summarise(value=mean(`value`)))
all_Sulfate <- (daily_SPEC_2014
    %>% filter(`Parameter.Name` == "Sulfate PM2.5 LC")
    %>% select(State=`State.Code`
             , County=`County.Code`
             , Site=`Site.Num`
             , obs=`Arithmetic.Mean`
             , date=`Date.Local`)
    %>% group_by(State
               , County
               , Site
               , date)
    %>% summarise(value=mean(`value`)))

total_total__Nitrate <- (daily_SPEC_2014 
    %>% filter(`Parameter.Name` == "Total Nitrate PM2.5 LC") 
    %>% select(State=`State.Code`
             , County=`County.Code`
             , Site=`Site.Num`
             , obs=`Arithmetic.Mean`
             , date=`Date.Local`)
    %>% group_by(State
               , County
               , Site
               , date)
    %>% summarise(value=mean(`value`)))
total_total__Nitrate <- (daily_SPEC_2014 
    %>% filter(`Parameter.Name` == "Total Nitrate PM2.5 LC") 
    %>% select(State=`State.Code`
             , County=`County.Code`
             , Site=`Site.Num`
             , obs=`Arithmetic.Mean`
             , date=`Date.Local`)
    %>% group_by(State
               , County
               , Site
               , date)
    %>% summarise(value=mean(`value`)))
total_total__Nitrate <- (daily_SPEC_2014 
    %>% filter(`Parameter.Name` == "Total Nitrate PM2.5 LC") 
    %>% select(State=`State.Code`
             , County=`County.Code`
             , Site=`Site.Num`
             , obs=`Arithmetic.Mean`
             , date=`Date.Local`)
    %>% group_by(State
               , County
               , Site
               , date)
    %>% summarise(value=mean(`obs`)))
head(total_total__Nitrate)
all_Sulfate <- (daily_SPEC_2014
    %>% filter(`Parameter.Name` == "Sulfate PM2.5 LC")
    %>% select(State=`State.Code`
             , County=`County.Code`
             , Site=`Site.Num`
             , obs=`Arithmetic.Mean`
             , date=`Date.Local`)
    %>% group_by(State
               , County
               , Site
               , date)
    %>% summarise(value=mean(`obs`)))
dim(all_Sulfate) == dim(total_total__Nitrate)
dim(all_Sulfate)
dim(total_total__Nitrate)
head(total_total__Nitrate)
all_Sulfate <- (daily_SPEC_2014
    %>% filter(`Parameter.Name` == "Sulfate PM2.5 LC")
    %>% select(State=`State.Code`
             , County=`County.Code`
             , Site=`Site.Num`
             , obs=`Arithmetic.Mean`
             , date=`Date.Local`)
    %>% group_by(State
               , County
               , Site
               , date)
    %>% summarise(value_Sulfate=mean(`obs`)))
total_total__Nitrate <- (daily_SPEC_2014 
    %>% filter(`Parameter.Name` == "Total Nitrate PM2.5 LC") 
    %>% select(State=`State.Code`
             , County=`County.Code`
             , Site=`Site.Num`
             , obs=`Arithmetic.Mean`
             , date=`Date.Local`)
    %>% group_by(State
               , County
               , Site
               , date)
    %>% summarise(value_Nitrate=mean(`obs`)))
head(total_total__Nitrate)
head(join(total_total__Nitrate, all_Sulfate))
head(inner_join(total_total__Nitrate, all_Sulfate))
both_S_and_N <- (inner_join(total_total__Nitrate, all_Sulfate))
head(inner_join)
head(both_S_and_N)
both_S_and_N %>%
group_by(State, County, Site, date) %>%
summa
both_S_and_N %>%
group_by(State, County, Site, date) %>%
summarise(correlation=cor(`value_Sulfate`, `value_Nitrate`)
)
?cor
both_S_and_N %>%
group_by(State, County, Site, date) %>%
summarise(correlation=cor(`value_Sulfate`, `value_Nitrate`, na.rm = TRUE)
)
both_S_and_N %>%
group_by(State, County, Site, date) %>%
summarise(correlation=cor(`value_Sulfate`, `value_Nitrate`, na.rm = TRUE, use = "complete.obs"))
both_S_and_N %>%
group_by(State, County, Site, date) %>%
summarise(correlation=cor(`value_Sulfate`, `value_Nitrate`, use = "complete.obs"))
both_S_and_N %>%
group_by(State, County, Site) %>%
summarise(correlation=cor(`value_Sulfate`, `value_Nitrate`, use = "complete.obs"))
both_S_and_N %>%
group_by(State, County, Site) %>%
summarise(correlation=cor(`value_Sulfate`, `value_Nitrate`, use = "complete.obs")) %>%
arrange(desc(correlation))
both_S_and_N %>%
group_by(State, County, Site) %>%
summarise(correlation=cor(`value_Sulfate`, `value_Nitrate`, use = "complete.obs"))
both_S_and_N %>%
group_by(State, County, Site) %>%
summarise(correlation=cor(`value_Sulfate`, `value_Nitrate`, use = "complete.obs")) %>%
arrange(desc(correlation))
quit()
n
